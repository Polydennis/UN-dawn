{% doc %}
  @prompt
    Create a custom collection list section that automatically displays all collections whose title starts with "Motivwelt". The section should dynamically query and display these collections without requiring manual selection. It should use a grid layout similar to the standard collection list, show collection images and titles, and automatically update when new collections starting with "Motivwelt" are created. Include settings for columns, image ratio, and spacing to match the existing theme style., er sagt, dass keine kategorie gefunden wurde.
    eventuell kleinschreiben? "motivwelt"?
    hier ist eine url einer motivwelt:
    https://unik-nordic.com/collections/motivwelt-tannenwald-aquarell
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-motivwelt-collections-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    padding: {{ block.settings.padding_top }}px 0 {{ block.settings.padding_bottom }}px;
  }

  .ai-motivwelt-collections__container-{{ ai_gen_id }} {
    max-width: {{ settings.page_width }}px;
    margin: 0 auto;
    padding: 0 {{ settings.spacing_grid_horizontal }}px;
  }

  .ai-motivwelt-collections__header-{{ ai_gen_id }} {
    text-align: {{ block.settings.heading_alignment }};
    margin-bottom: {{ block.settings.heading_spacing }}px;
  }

  .ai-motivwelt-collections__title-{{ ai_gen_id }} {
    margin: 0;
    font-size: calc(var(--font-heading-scale) * 2rem);
    color: rgb(var(--color-foreground));
  }

  .ai-motivwelt-collections__grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
    gap: {{ settings.spacing_grid_vertical }}px {{ settings.spacing_grid_horizontal }}px;
    margin: 0;
    padding: 0;
    list-style: none;
  }

  @media screen and (min-width: 750px) {
    .ai-motivwelt-collections__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat({{ block.settings.columns_desktop }}, 1fr);
    }
  }

  .ai-motivwelt-collections__item-{{ ai_gen_id }} {
    position: relative;
  }

  .ai-motivwelt-collections__card-{{ ai_gen_id }} {
    display: block;
    text-decoration: none;
    height: 100%;
    position: relative;
    {% if settings.collection_card_style == 'card' %}
      background-color: rgb(var(--color-background));
      border-radius: {{ settings.collection_card_corner_radius }}px;
      {% if settings.collection_card_border_thickness > 0 %}
        border: {{ settings.collection_card_border_thickness }}px solid rgba(var(--color-foreground), {{ settings.collection_card_border_opacity | divided_by: 100.0 }});
      {% endif %}
      {% if settings.collection_card_shadow_opacity > 0 %}
        box-shadow: {{ settings.collection_card_shadow_horizontal_offset }}px {{ settings.collection_card_shadow_vertical_offset }}px {{ settings.collection_card_shadow_blur }}px rgba(var(--color-shadow), {{ settings.collection_card_shadow_opacity | divided_by: 100.0 }});
      {% endif %}
    {% endif %}
  }

  .ai-motivwelt-collections__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
    {% if settings.collection_card_style == 'card' %}
      border-radius: {{ settings.collection_card_corner_radius }}px {{ settings.collection_card_corner_radius }}px 0 0;
    {% else %}
      border-radius: {{ settings.collection_card_corner_radius }}px;
    {% endif %}
    padding: {{ settings.collection_card_image_padding }}px;
  }

  .ai-motivwelt-collections__image-ratio-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    {% if block.settings.image_ratio == 'adapt' %}
      padding-bottom: 100%;
    {% elsif block.settings.image_ratio == 'portrait' %}
      padding-bottom: 125%;
    {% elsif block.settings.image_ratio == 'square' %}
      padding-bottom: 100%;
    {% else %}
      padding-bottom: 66.67%;
    {% endif %}
  }

  .ai-motivwelt-collections__image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: {{ settings.media_radius }}px;
  }

  .ai-motivwelt-collections__placeholder-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--color-foreground), 0.04);
    border-radius: {{ settings.media_radius }}px;
  }

  .ai-motivwelt-collections__placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-motivwelt-collections__content-{{ ai_gen_id }} {
    padding: 16px;
    text-align: {{ settings.collection_card_text_alignment }};
  }

  .ai-motivwelt-collections__collection-title-{{ ai_gen_id }} {
    margin: 0;
    font-size: 1.25rem;
    color: rgb(var(--color-foreground));
    font-weight: 500;
  }

  .ai-motivwelt-collections__empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 60px 20px;
    color: rgba(var(--color-foreground), 0.6);
    font-size: 1rem;
  }

  @media screen and (min-width: 750px) {
    .ai-motivwelt-collections__content-{{ ai_gen_id }} {
      padding: 20px;
    }

    .ai-motivwelt-collections__collection-title-{{ ai_gen_id }} {
      font-size: 1.5rem;
    }
  }
{% endstyle %}

<motivwelt-collections-{{ ai_gen_id }}
  class="ai-motivwelt-collections-{{ ai_gen_id }} color-{{ block.settings.color_scheme }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-motivwelt-collections__container-{{ ai_gen_id }}">
    {% if block.settings.heading != blank %}
      <div class="ai-motivwelt-collections__header-{{ ai_gen_id }}">
        <h2 class="ai-motivwelt-collections__title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
      </div>
    {% endif %}

    {% assign motivwelt_collections = '' | split: '' %}
    {% for collection in collections %}
      {% assign collection_handle_lower = collection.handle | downcase %}
      {% if collection_handle_lower contains 'motivwelt' %}
        {% assign motivwelt_collections = motivwelt_collections | concat: collection %}
      {% endif %}
    {% endfor %}

    {% if motivwelt_collections.size > 0 %}
      <ul class="ai-motivwelt-collections__grid-{{ ai_gen_id }}">
        {% for collection in motivwelt_collections limit: block.settings.collections_to_show %}
          <li class="ai-motivwelt-collections__item-{{ ai_gen_id }}">
            <a
              href="{{ collection.url }}"
              class="ai-motivwelt-collections__card-{{ ai_gen_id }}"
            >
              <div class="ai-motivwelt-collections__image-wrapper-{{ ai_gen_id }}">
                <div class="ai-motivwelt-collections__image-ratio-{{ ai_gen_id }}">
                  {% if collection.featured_image %}
                    <img
                      src="{{ collection.featured_image | image_url: width: 800 }}"
                      alt="{{ collection.featured_image.alt | escape }}"
                      loading="lazy"
                      width="{{ collection.featured_image.width }}"
                      height="{{ collection.featured_image.height }}"
                      class="ai-motivwelt-collections__image-{{ ai_gen_id }}"
                    >
                  {% else %}
                    <div class="ai-motivwelt-collections__placeholder-{{ ai_gen_id }}">
                      {{ 'collection-1' | placeholder_svg_tag }}
                    </div>
                  {% endif %}
                </div>
              </div>
              {% if block.settings.show_collection_title %}
                <div class="ai-motivwelt-collections__content-{{ ai_gen_id }}">
                  <h3 class="ai-motivwelt-collections__collection-title-{{ ai_gen_id }}">
                    {{ collection.title }}
                  </h3>
                </div>
              {% endif %}
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="ai-motivwelt-collections__empty-state-{{ ai_gen_id }}">
        Keine Kollektionen mit "motivwelt" im Handle gefunden. Erstellen Sie Kollektionen, deren Handle "motivwelt" enthält, um sie hier anzuzeigen.
      </div>
    {% endif %}
  </div>
</motivwelt-collections-{{ ai_gen_id }}>

<script>
  (function() {
    class MotivweltCollections{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.setupHoverEffects();
      }

      setupHoverEffects() {
        const cards = this.querySelectorAll('.ai-motivwelt-collections__card-{{ ai_gen_id }}');
        
        cards.forEach((card) => {
          card.addEventListener('mouseenter', function() {
            const image = this.querySelector('.ai-motivwelt-collections__image-{{ ai_gen_id }}');
            if (image) {
              image.style.transform = 'scale(1.05)';
              image.style.transition = 'transform 0.3s ease';
            }
          });

          card.addEventListener('mouseleave', function() {
            const image = this.querySelector('.ai-motivwelt-collections__image-{{ ai_gen_id }}');
            if (image) {
              image.style.transform = 'scale(1)';
            }
          });
        });
      }
    }

    customElements.define('motivwelt-collections-{{ ai_gen_id }}', MotivweltCollections{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Motivwelt Kollektionen",
  "tag": null,
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Überschrift",
      "default": "Unsere Motivwelten"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Überschrift Ausrichtung",
      "options": [
        {
          "value": "left",
          "label": "Links"
        },
        {
          "value": "center",
          "label": "Zentriert"
        },
        {
          "value": "right",
          "label": "Rechts"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "label": "Abstand unter Überschrift",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Spalten Desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 3
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Spalten Mobil",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "collections_to_show",
      "label": "Max. Anzahl Kollektionen",
      "min": 3,
      "max": 24,
      "step": 1,
      "default": 12
    },
    {
      "type": "header",
      "content": "Bild"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "Bildverhältnis",
      "options": [
        {
          "value": "landscape",
          "label": "Querformat"
        },
        {
          "value": "portrait",
          "label": "Hochformat"
        },
        {
          "value": "square",
          "label": "Quadratisch"
        }
      ],
      "default": "square"
    },
    {
      "type": "checkbox",
      "id": "show_collection_title",
      "label": "Kollektionstitel anzeigen",
      "default": true
    },
    {
      "type": "header",
      "content": "Farben"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Farbschema",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Abstände"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Abstand oben",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Abstand unten",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Motivwelt Kollektionen"
    }
  ]
}
{% endschema %}
